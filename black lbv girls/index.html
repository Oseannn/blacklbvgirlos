<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion - Black LBV Girl</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Material Symbols -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#137fec',
                        secondary: '#64748b',
                        bgLight: '#f6f7f8',
                        bgDark: '#101922',
                        surfaceLight: '#ffffff',
                        surfaceDark: '#1a2632',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .glass-dark {
            background: rgba(16, 25, 34, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>

<body class="bg-bgLight text-slate-800 h-screen flex overflow-hidden">

    <!-- Left Side - Branding (Hidden on mobile) -->
    <div class="hidden lg:flex w-1/2 bg-bgDark relative items-center justify-center p-12 overflow-hidden">
        <div
            class="absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-primary rounded-full mix-blend-multiply filter blur-[100px] opacity-20 animate-pulse">
        </div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-purple-600 rounded-full mix-blend-multiply filter blur-[100px] opacity-20 animate-pulse"
            style="animation-delay: 2s"></div>

        <div class="relative z-10 text-white max-w-lg">
            <div class="flex items-center gap-3 mb-8">
                <div
                    class="w-12 h-12 bg-primary rounded-xl flex items-center justify-center shadow-lg shadow-primary/30">
                    <span class="material-symbols-outlined text-3xl">storefront</span>
                </div>
                <h1 class="text-4xl font-bold tracking-tight">Black LBV Girl</h1>
            </div>
            <p class="text-xl text-gray-300 font-light leading-relaxed mb-8">
                Gérez votre boutique avec élégance et efficacité. Une solution tout-en-un pour les ventes, les stocks et
                la relation client.
            </p>
        </div>

        <div class="absolute bottom-10 right-10 glass-dark p-4 rounded-xl max-w-xs animate-fade-in">
            <div class="flex items-center gap-3 mb-2">
                <div class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center text-green-400">
                    <span class="material-symbols-outlined text-sm">trending_up</span>
                </div>
                <div>
                    <div class="text-xs text-gray-400">Ventes aujourd'hui</div>
                    <div class="font-bold text-white">+580 000 FCFA</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Right Side - Login Form -->
    <div class="w-full lg:w-1/2 flex items-center justify-center p-6 lg:p-12 relative bg-white">
        <div class="w-full max-w-md space-y-8 animate-fade-in text-center lg:text-left">
            <div>
                <h2 class="text-3xl font-bold tracking-tight text-gray-900">Bon retour !</h2>
                <p class="mt-2 text-sm text-gray-500">Veuillez choisir votre espace de connexion</p>
            </div>

            <!-- Role Selector -->
            <div class="bg-gray-100 p-1 rounded-xl flex mt-6 gap-1">
                <button onclick="selectRole('admin')" id="btn-admin"
                    class="flex-1 flex items-center justify-center gap-2 py-2.5 text-sm font-medium rounded-lg transition-all shadow-sm bg-white text-gray-900">
                    <span class="material-symbols-outlined text-lg">admin_panel_settings</span>
                    Administration
                </button>
                <button onclick="selectRole('vendeuse')" id="btn-vendeuse"
                    class="flex-1 flex items-center justify-center gap-2 py-2.5 text-sm font-medium rounded-lg text-gray-500 hover:text-gray-900 transition-all">
                    <span class="material-symbols-outlined text-lg">point_of_sale</span>
                    Vendeuse
                </button>
            </div>

            <!-- Form -->
            <form id="loginForm" class="mt-8 space-y-6" onsubmit="handleLogin(event)">
                <input type="hidden" id="selectedRole" value="admin">

                <div class="space-y-4 text-left">
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700">Adresse Email</label>
                        <div class="mt-1 relative">
                            <input id="email" type="email" required
                                class="block w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all"
                                value="admin@store.com">
                        </div>
                    </div>

                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700">Mot de passe</label>
                        <div class="mt-1 relative">
                            <input id="password" type="password" required
                                class="block w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all"
                                value="admin123">
                        </div>
                    </div>
                </div>

                <div id="error-message"
                    class="hidden text-red-500 text-sm text-center bg-red-50 p-3 rounded-lg border border-red-100 italic">
                </div>

                <button type="submit"
                    class="w-full flex justify-center py-4 px-4 border border-transparent text-sm font-bold rounded-xl text-white bg-primary hover:bg-blue-600 focus:outline-none transition-all shadow-lg shadow-primary/30 transform hover:-translate-y-0.5">
                    Se connecter
                </button>
            </form>

            <div class="mt-8 flex justify-center gap-4 text-xs text-gray-300">
                <p>© 2026 Black LBV Girl.</p>
                <button onclick="resetApp()" class="hover:text-gray-500 underline">Debug Reset</button>
            </div>
        </div>
    </div>

    <!-- CORE LOGIC INLINED FOR VERCEL -->
    <script>
        // Data Seeding
        const INITIAL_USERS = {
            admin: { email: 'admin@store.com', password: 'admin123', role: 'admin', name: 'Administrateur', id: 'admin_001', avatar: 'https://ui-avatars.com/api/?name=Admin&background=137fec&color=fff' },
            vendeuse1: { email: 'sarah@store.com', password: 'vendeuse123', role: 'vendeuse', name: 'Sarah Jenkins', id: 'v_001', avatar: 'https://ui-avatars.com/api/?name=Sarah+Jenkins&background=random' },
            vendeuse2: { email: 'marie@store.com', password: 'vendeuse123', role: 'vendeuse', name: 'Marie Dupont', id: 'v_002', avatar: 'https://ui-avatars.com/api/?name=Marie+Dupont&background=random' }
        };

        const StorageHelper = {
            get(key) {
                try { return JSON.parse(localStorage.getItem(key)); } catch (e) { return null; }
            },
            set(key, val) { localStorage.setItem(key, JSON.stringify(val)); },
            init() {
                if (!this.get('users')) this.set('users', INITIAL_USERS);
                if (!this.get('settings')) this.set('settings', { storeName: 'Black LBV Girl', currency: 'XAF' });
            },
            getUserByEmail(email) {
                const users = this.get('users') || INITIAL_USERS;
                return Object.values(users).find(u => u.email === email);
            },
            setCurrentUser(user) { this.set('currentUser', user); },
            resetDatabase() { localStorage.clear(); location.reload(); }
        };
        StorageHelper.init();

        const Auth = {
            login(email, password, role) {
                const user = StorageHelper.getUserByEmail(email);
                if (!user) return { success: false, message: 'Email introuvable' };
                if (user.password !== password) return { success: false, message: 'Mot de passe incorrect' };
                if (user.role !== role) return { success: false, message: 'Rôle incorrect pour cet utilisateur' };

                const session = { ...user, sessionStart: new Date().toISOString() };
                delete session.password;
                StorageHelper.setCurrentUser(session);
                return { success: true };
            }
        };

        function selectRole(role) {
            document.getElementById('selectedRole').value = role;
            const isAdmin = role === 'admin';
            document.getElementById('btn-admin').className = isAdmin ? "flex-1 flex items-center justify-center gap-2 py-2.5 text-sm font-medium rounded-lg shadow-sm bg-white text-gray-900" : "flex-1 flex items-center justify-center gap-2 py-2.5 text-sm font-medium rounded-lg text-gray-500 hover:text-gray-900 transition-all";
            document.getElementById('btn-vendeuse').className = !isAdmin ? "flex-1 flex items-center justify-center gap-2 py-2.5 text-sm font-medium rounded-lg shadow-sm bg-white text-gray-900" : "flex-1 flex items-center justify-center gap-2 py-2.5 text-sm font-medium rounded-lg text-gray-500 hover:text-gray-900 transition-all";

            document.getElementById('email').value = isAdmin ? 'admin@store.com' : 'sarah@store.com';
            document.getElementById('password').value = isAdmin ? 'admin123' : 'vendeuse123';
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const role = document.getElementById('selectedRole').value;
            const errorDiv = document.getElementById('error-message');

            const res = Auth.login(email, password, role);
            if (res.success) {
                location.href = role === 'admin' ? 'admin_dashboard.html' : 'vendeuse_dashboard.html';
            } else {
                errorDiv.textContent = res.message;
                errorDiv.classList.remove('hidden');
            }
        }

        function resetApp() { if (confirm('Réinitialiser les données ?')) StorageHelper.resetDatabase(); }
    </script>
</body>

</html>