<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espace Vendeuse - RetailOS</title>

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#137fec',
                        secondary: '#64748b',
                        bgLight: '#f6f7f8',
                        bgDark: '#101922',
                        surfaceLight: '#ffffff',
                        surfaceDark: '#1a2632',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="bg-bgLight text-slate-800 h-screen flex flex-col md:flex-row overflow-hidden">

    <!-- Mobile Navigation (Bottom) -->
    <nav class="md:hidden fixed bottom-0 w-full bg-white border-t border-gray-200 z-50 flex justify-around p-3 pb-safe">
        <button onclick="VendeuseApp.switchView('dashboard')" class="flex flex-col items-center text-primary">
            <span class="material-symbols-outlined">dashboard</span>
            <span class="text-[10px] font-medium mt-1">Accueil</span>
        </button>
        <button onclick="VendeuseApp.switchView('pos')" class="flex flex-col items-center text-gray-400">
            <span class="material-symbols-outlined">point_of_sale</span>
            <span class="text-[10px] font-medium mt-1">Vente</span>
        </button>
        <button onclick="VendeuseApp.switchView('history')" class="flex flex-col items-center text-gray-400">
            <span class="material-symbols-outlined">receipt_long</span>
            <span class="text-[10px] font-medium mt-1">Historique</span>
        </button>
        <button onclick="VendeuseApp.switchView('clients')" class="flex flex-col items-center text-gray-400">
            <span class="material-symbols-outlined">group</span>
            <span class="text-[10px] font-medium mt-1">Clients</span>
        </button>
    </nav>

    <!-- Sidebar (Desktop) -->
    <aside
        class="w-20 lg:w-64 bg-surfaceLight border-r border-gray-200 hidden md:flex flex-col z-20 transition-all duration-300">
        <!-- Logo -->
        <div class="h-20 flex items-center justify-center lg:justify-start lg:px-6 border-b border-gray-100">
            <div
                class="w-10 h-10 bg-primary rounded-xl flex items-center justify-center text-white shadow-lg shadow-primary/20">
                <span class="material-symbols-outlined text-xl">storefront</span>
            </div>
            <h1 class="hidden lg:block ml-3 text-lg font-bold tracking-tight">RetailOS</h1>
        </div>

        <!-- Nav -->
        <nav class="flex-1 py-6 px-2 lg:px-4 space-y-2">
            <button onclick="VendeuseApp.switchView('dashboard')" id="nav-dashboard"
                class="nav-item w-full flex items-center justify-center lg:justify-start px-2 lg:px-4 py-3 text-sm font-medium rounded-xl bg-primary/10 text-primary transition-all group relative">
                <span class="material-symbols-outlined text-2xl">dashboard</span>
                <span class="hidden lg:block ml-3">Mon Dashboard</span>
                <!-- Tooltip for collapsed state -->
                <div
                    class="absolute left-16 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 lg:hidden pointer-events-none transition-opacity z-50">
                    Dashboard</div>
            </button>

            <button onclick="VendeuseApp.switchView('pos')" id="nav-pos"
                class="nav-item w-full flex items-center justify-center lg:justify-start px-2 lg:px-4 py-3 text-sm font-medium rounded-xl text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-all group relative">
                <span class="material-symbols-outlined text-2xl">point_of_sale</span>
                <span class="hidden lg:block ml-3">Nouvelle Vente</span>
            </button>

            <button onclick="VendeuseApp.switchView('history')" id="nav-history"
                class="nav-item w-full flex items-center justify-center lg:justify-start px-2 lg:px-4 py-3 text-sm font-medium rounded-xl text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-all group relative">
                <span class="material-symbols-outlined text-2xl">receipt_long</span>
                <span class="hidden lg:block ml-3">Mes Ventes</span>
            </button>

            <button onclick="VendeuseApp.switchView('caisse')" id="nav-caisse"
                class="nav-item w-full flex items-center justify-center lg:justify-start px-2 lg:px-4 py-3 text-sm font-medium rounded-xl text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-all group relative">
                <span class="material-symbols-outlined text-2xl">account_balance_wallet</span>
                <span class="hidden lg:block ml-3">Caisse</span>
            </button>

            <button onclick="VendeuseApp.switchView('clients')" id="nav-clients"
                class="nav-item w-full flex items-center justify-center lg:justify-start px-2 lg:px-4 py-3 text-sm font-medium rounded-xl text-gray-500 hover:text-gray-900 hover:bg-gray-50 transition-all group relative">
                <span class="material-symbols-outlined text-2xl">group</span>
                <span class="hidden lg:block ml-3">Mes Clientes</span>
            </button>
        </nav>

        <!-- Profile Brief -->
        <div class="p-4 border-t border-gray-100 flex flex-col items-center lg:items-stretch">
            <div class="flex items-center gap-3 mb-4 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors">
                <img id="user-avatar" src="" alt="" class="w-10 h-10 rounded-full border border-gray-200">
                <div class="hidden lg:block min-w-0">
                    <p id="user-name" class="text-sm font-bold text-gray-900 truncate">Charge...</p>
                    <p class="text-xs text-green-600 flex items-center">
                        <span class="w-1.5 h-1.5 rounded-full bg-green-500 mr-1 animate-pulse"></span> En ligne
                    </p>
                </div>
            </div>
            <button onclick="Auth.logout()"
                class="w-full flex items-center justify-center lg:justify-start px-4 py-2 text-sm font-medium text-red-500 bg-red-50 hover:bg-red-100 rounded-lg transition-colors">
                <span class="material-symbols-outlined lg:mr-2">logout</span>
                <span class="hidden lg:inline">D√©connexion</span>
            </button>
        </div>
    </aside>

    <!-- Main Content Area -->
    <main class="flex-1 flex flex-col relative overflow-hidden bg-bgLight">

        <!-- Header (Unified) -->
        <header
            class="h-16 lg:h-20 bg-surfaceLight/80 backdrop-blur-lg border-b border-gray-200 flex items-center justify-between px-6 z-10">
            <div>
                <h2 id="view-title" class="text-lg lg:text-xl font-bold text-primary">Bonjour !</h2>
                <p id="view-subtitle" class="text-xs text-gray-400 hidden lg:block">Pr√™t pour une excellente journ√©e de
                    vente ?</p>
            </div>

            <div class="flex items-center gap-3">
                <div class="hidden lg:flex items-center bg-gray-100 rounded-lg px-3 py-1.5">
                    <span class="material-symbols-outlined text-gray-400 text-sm">calendar_today</span>
                    <span id="current-date" class="ml-2 text-xs font-medium text-gray-600">...</span>
                </div>
                <!-- Notifs -->
                <button
                    class="relative p-2 text-gray-400 hover:text-primary transition-colors rounded-lg hover:bg-blue-50">
                    <span class="material-symbols-outlined">notifications</span>
                </button>
            </div>
        </header>

        <!-- Views Container -->
        <div class="flex-1 overflow-hidden relative">

            <!-- VIEW: DASHBOARD -->
            <div id="view-dashboard" class="absolute inset-0 overflow-y-auto p-6 lg:p-8 space-y-8 pb-24 lg:pb-8">
                <!-- Welcome Banner -->
                <div
                    class="bg-gradient-to-r from-primary to-blue-600 rounded-2xl p-6 text-white shadow-lg shadow-primary/30 relative overflow-hidden">
                    <div class="absolute right-0 top-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-16 -mt-16"></div>
                    <div class="relative z-10">
                        <h3 class="text-2xl font-bold mb-2">Bienvenue, <span id="dash-name">...</span> üëã</h3>
                        <p class="text-blue-100 max-w-lg text-sm leading-relaxed">
                            Vous avez r√©alis√© <span class="font-bold text-white">12 ventes</span> cette semaine.
                            Votre objectif mensuel est atteint √† <span class="font-bold text-white">78%</span>.
                            Continuez comme √ßa !
                        </p>
                    </div>
                </div>

                <!-- KPI Grid -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div
                        class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-xs font-medium text-gray-500 uppercase">Ventes du jour</p>
                                <h4 class="text-2xl font-bold text-gray-900 mt-1" id="dash-sales-today">0 ‚Ç¨</h4>
                            </div>
                            <div class="p-2 bg-blue-50 text-blue-600 rounded-lg">
                                <span class="material-symbols-outlined">payments</span>
                            </div>
                        </div>
                        <div
                            class="mt-4 flex items-center text-xs text-green-600 bg-green-50 w-fit px-2 py-1 rounded-md">
                            <span class="material-symbols-outlined text-sm mr-1">arrow_upward</span> +12% vs hier
                        </div>
                    </div>

                    <div
                        class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-xs font-medium text-gray-500 uppercase">Transactions</p>
                                <h4 class="text-2xl font-bold text-gray-900 mt-1" id="dash-trans-count">0</h4>
                            </div>
                            <div class="p-2 bg-purple-50 text-purple-600 rounded-lg">
                                <span class="material-symbols-outlined">receipt</span>
                            </div>
                        </div>
                        <div class="mt-4 text-xs text-gray-400">
                            Panier moyen: <span class="font-medium text-gray-700" id="dash-avg-cart">0 ‚Ç¨</span>
                        </div>
                    </div>

                    <div
                        class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100 hover:shadow-md transition-all">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-xs font-medium text-gray-500 uppercase">Objectif Mensuel</p>
                                <h4 class="text-2xl font-bold text-gray-900 mt-1">78%</h4>
                            </div>
                            <div class="p-2 bg-orange-50 text-orange-600 rounded-lg">
                                <span class="material-symbols-outlined">target</span>
                            </div>
                        </div>
                        <div class="w-full bg-gray-100 rounded-full h-2 mt-4">
                            <div class="bg-orange-500 h-2 rounded-full" style="width: 78%"></div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden">
                    <div class="p-5 border-b border-gray-100 flex justify-between items-center bg-gray-50/30">
                        <h3 class="font-bold text-gray-800">Activit√© R√©cente</h3>
                        <button onclick="VendeuseApp.switchView('history')"
                            class="text-xs font-medium text-primary hover:underline">Tout voir</button>
                    </div>
                    <div class="divide-y divide-gray-100" id="dash-recent-activity">
                        <!-- Populated by JS -->
                        <div class="p-8 text-center text-gray-400 text-sm">Chargement...</div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onclick="VendeuseApp.switchView('pos')"
                        class="p-4 bg-primary text-white rounded-xl shadow-lg shadow-primary/30 hover:bg-blue-600 active:scale-95 transition-all text-left">
                        <span class="material-symbols-outlined text-2xl mb-2">add_shopping_cart</span>
                        <div class="font-bold">Nouvelle Vente</div>
                        <div class="text-xs text-blue-100 opacity-80">Acc√©der au POS</div>
                    </button>
                    <button onclick="VendeuseApp.switchView('clients')"
                        class="p-4 bg-white text-gray-700 border border-gray-100 rounded-xl shadow-sm hover:shadow-md active:scale-95 transition-all text-left">
                        <span class="material-symbols-outlined text-2xl mb-2 text-purple-500">person_add</span>
                        <div class="font-bold">Nouveau Client</div>
                        <div class="text-xs text-gray-400">Cr√©er une fiche</div>
                    </button>
                </div>
            </div>

            <!-- VIEW: POS (Point of Sale) -->
            <div id="view-pos"
                class="absolute inset-0 bg-gray-100 hidden flex flex-col lg:flex-row overflow-hidden pb-16 lg:pb-0">
                <!-- Left: Catalog (65%) -->
                <div class="flex-1 flex flex-col h-full overflow-hidden border-r border-gray-200 bg-gray-50">
                    <!-- Catalog Header -->
                    <div class="p-4 bg-white border-b border-gray-200 shadow-sm z-10">
                        <div class="flex flex-col md:flex-row md:items-center gap-4">
                            <div class="relative flex-1">
                                <span
                                    class="material-symbols-outlined absolute left-3 top-2.5 text-gray-400">search</span>
                                <input type="text" id="pos-search" placeholder="Scanner ou rechercher..."
                                    class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-shadow font-medium">
                                <button class="absolute right-2 top-2 p-1 text-gray-400 hover:text-gray-600">
                                    <span class="material-symbols-outlined">barcode_scanner</span>
                                </button>
                            </div>
                            <div class="flex gap-2 overflow-x-auto pb-2 md:pb-0 no-scrollbar" id="pos-categories">
                                <button
                                    class="px-4 py-1.5 rounded-full bg-primary text-white text-sm font-medium whitespace-nowrap shadow-sm">Tout</button>
                                <button
                                    class="px-4 py-1.5 rounded-full bg-white text-gray-600 border border-gray-200 hover:bg-gray-50 text-sm font-medium whitespace-nowrap">Chaussures</button>
                                <button
                                    class="px-4 py-1.5 rounded-full bg-white text-gray-600 border border-gray-200 hover:bg-gray-50 text-sm font-medium whitespace-nowrap">V√™tements</button>
                                <button
                                    class="px-4 py-1.5 rounded-full bg-white text-gray-600 border border-gray-200 hover:bg-gray-50 text-sm font-medium whitespace-nowrap">Accessoires</button>
                            </div>
                        </div>
                    </div>

                    <!-- Products Grid -->
                    <div class="p-4 overflow-y-auto grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"
                        id="pos-products-grid">
                        <!-- Products injected here -->
                    </div>
                </div>

                <!-- Right: Cart (35%) -->
                <div class="w-full lg:w-[400px] bg-white flex flex-col h-full shadow-xl z-20">
                    <!-- Cart Header / Client -->
                    <div class="p-4 border-b border-gray-100 bg-gray-50/50">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-bold text-gray-800">Panier en cours</h3>
                            <button class="text-xs text-red-500 hover:underline"
                                onclick="POS.clearCart()">Vider</button>
                        </div>
                        <div class="flex items-center gap-2" id="client-selector">
                            <div
                                class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500">
                                <span class="material-symbols-outlined">person</span>
                            </div>
                            <div class="flex-1">
                                <button onclick="POS.openClientModal()"
                                    class="text-sm font-medium text-primary hover:underline flex items-center">
                                    S√©lectionner Client <span
                                        class="material-symbols-outlined text-sm ml-1">arrow_drop_down</span>
                                </button>
                                <p class="text-xs text-gray-400">Client invit√©</p>
                            </div>
                            <button class="p-2 hover:bg-gray-200 rounded-full transition-colors"
                                onclick="POS.openClientModal()">
                                <span class="material-symbols-outlined text-gray-500">person_add</span>
                            </button>
                        </div>
                    </div>

                    <!-- Cart Items -->
                    <div class="flex-1 overflow-y-auto p-4 space-y-4" id="pos-cart-items">
                        <!-- Empty State -->
                        <div class="h-full flex flex-col items-center justify-center text-gray-400 opacity-60">
                            <span class="material-symbols-outlined text-6xl mb-4">shopping_cart_off</span>
                            <p>Le panier est vide</p>
                        </div>
                    </div>

                    <!-- Footer: Calculations & Pay -->
                    <div class="p-4 bg-white border-t border-gray-100 shadow-[0_-5px_20px_rgba(0,0,0,0.05)]">
                        <div class="space-y-2 mb-4">
                            <div class="flex justify-between text-sm text-gray-500">
                                <span>Sous-total</span>
                                <span id="cart-subtotal">0.00 ‚Ç¨</span>
                            </div>
                            <div class="flex justify-between text-sm text-gray-500">
                                <span>Taxes (0%)</span> <!-- Simplified tax for now -->
                                <span id="cart-tax">0.00 ‚Ç¨</span>
                            </div>
                            <div class="flex justify-between items-center pt-2">
                                <span class="font-bold text-gray-900 text-lg">Total</span>
                                <span class="font-bold text-primary text-2xl" id="cart-total">0.00 ‚Ç¨</span>
                            </div>
                        </div>

                        <!-- Payment Methods -->
                        <div class="grid grid-cols-3 gap-2 mb-4">
                            <button onclick="POS.setPaymentMethod('cash')"
                                class="py-2 rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 text-sm font-medium transition-all flex flex-col items-center gap-1 active-payment"
                                id="pm-cash">
                                <span class="material-symbols-outlined">payments</span> Cash
                            </button>
                            <button onclick="POS.setPaymentMethod('card')"
                                class="py-2 rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 text-sm font-medium transition-all flex flex-col items-center gap-1"
                                id="pm-card">
                                <span class="material-symbols-outlined">credit_card</span> Carte
                            </button>
                            <button onclick="POS.setPaymentMethod('mobile')"
                                class="py-2 rounded-lg border border-gray-200 hover:border-primary hover:bg-blue-50 text-sm font-medium transition-all flex flex-col items-center gap-1"
                                id="pm-mobile">
                                <span class="material-symbols-outlined">smartphone</span> Mobile
                            </button>
                        </div>

                        <button onclick="POS.processSale()"
                            class="w-full py-4 bg-primary text-white font-bold rounded-xl shadow-lg shadow-primary/30 hover:bg-blue-600 active:scale-95 transition-all text-lg flex items-center justify-center gap-2">
                            <span class="material-symbols-outlined">check_circle</span>
                            ENCAISSER
                        </button>
                    </div>
                </div>
            </div>

            <!-- VIEW: HISTORY (Placeholder) -->
            <div id="view-history" class="absolute inset-0 bg-white hidden p-8 overflow-y-auto">
                <h2 class="text-2xl font-bold mb-6">Historique des Ventes</h2>
                <div class="overflow-x-auto rounded-xl border border-gray-100">
                    <table class="w-full text-left">
                        <thead class="bg-gray-50 text-gray-500 text-sm">
                            <tr>
                                <th class="p-4">ID</th>
                                <th class="p-4">Date</th>
                                <th class="p-4">Client</th>
                                <th class="p-4 text-right">Montant</th>
                                <th class="p-4 text-center">Status</th>
                            </tr>
                        </thead>
                        <tbody id="history-table-body" class="divide-y divide-gray-100 text-sm">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- VIEW: CLIENTS (Dynamic) -->
            <div id="view-clients" class="absolute inset-0 bg-bgLight hidden overflow-y-auto">
                <!-- Content will be populated by JS -->
            </div>

            <!-- VIEW: CAISSE -->
            <div id="view-caisse" class="absolute inset-0 bg-bgLight hidden overflow-y-auto">
                <!-- Content will be populated by JS -->
            </div>

        </div>
    </main>

    <!-- Modal: Search Client (For POS) -->
    <div id="client-modal"
        class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm hidden">
        <div class="bg-white p-6 rounded-2xl w-full max-w-md shadow-2xl">
            <h3 class="font-bold text-lg mb-4">S√©lectionner un Client</h3>
            <input type="text" placeholder="Rechercher par nom ou t√©l√©phone..."
                class="w-full p-3 border border-gray-200 rounded-xl mb-4 focus:ring-2 focus:ring-primary/50 outline-none">
            <div class="max-h-60 overflow-y-auto space-y-2 mb-4" id="client-list-modal">
                <!-- Mock list -->
                <div class="p-3 hover:bg-gray-50 rounded-lg cursor-pointer flex justify-between items-center"
                    onclick="POS.selectClient({id: 'CLIENT_001', name: 'Marie Dubois', type: 'VIP'})">
                    <div>
                        <div class="font-medium">Marie Dubois</div>
                        <div class="text-xs text-gray-400">VIP ‚Ä¢ +33 6 12 34 56 78</div>
                    </div>
                    <span class="material-symbols-outlined text-gray-300">chevron_right</span>
                </div>
                <div class="p-3 hover:bg-gray-50 rounded-lg cursor-pointer flex justify-between items-center"
                    onclick="POS.selectClient({id: 'CLIENT_002', name: 'Sophie Martin', type: 'Regular'})">
                    <div>
                        <div class="font-medium">Sophie Martin</div>
                        <div class="text-xs text-gray-400">Regular ‚Ä¢ +33 6 98 76 54 32</div>
                    </div>
                    <span class="material-symbols-outlined text-gray-300">chevron_right</span>
                </div>
            </div>
            <button onclick="document.getElementById('client-modal').classList.add('hidden')"
                class="w-full py-3 bg-gray-100 text-gray-700 font-medium rounded-xl hover:bg-gray-200">Fermer</button>
        </div>
    </div>

    <!-- Modal: New Client -->
    <div id="new-client-modal"
        class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm hidden">
        <div class="bg-white p-6 rounded-2xl w-full max-w-md shadow-2xl">
            <h3 class="font-bold text-lg mb-4 text-gray-900">Nouveau Client</h3>
            <form onsubmit="VendeuseApp.saveNewClient(event)" class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Pr√©nom</label>
                        <input type="text" id="new-client-firstname" required
                            class="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/50 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nom</label>
                        <input type="text" id="new-client-lastname" required
                            class="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/50 outline-none">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Num√©ro WhatsApp</label>
                    <input type="tel" id="new-client-whatsapp" required placeholder="+241 ..."
                        class="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/50 outline-none">
                </div>
                <div class="flex gap-3 pt-2">
                    <button type="button" onclick="document.getElementById('new-client-modal').classList.add('hidden')"
                        class="flex-1 py-3 bg-gray-100 text-gray-700 font-medium rounded-xl hover:bg-gray-200">Annuler</button>
                    <button type="submit"
                        class="flex-1 py-3 bg-primary text-white font-bold rounded-xl hover:bg-blue-600 shadow-lg shadow-primary/30">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Client Details -->
    <div id="client-details-modal"
        class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm hidden">
        <div class="bg-white p-6 rounded-2xl w-full max-w-lg shadow-2xl">
            <div class="flex justify-between items-start mb-6">
                <div>
                    <h3 class="font-bold text-xl text-gray-900" id="detail-client-name">--</h3>
                    <p class="text-sm text-gray-500" id="detail-client-phone">--</p>
                </div>
                <button onclick="document.getElementById('client-details-modal').classList.add('hidden')"
                    class="p-2 hover:bg-gray-100 rounded-full text-gray-500">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>

            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                    <p class="text-xs text-blue-600 uppercase font-bold mb-1">Total D√©pens√©</p>
                    <p class="text-2xl font-bold text-blue-900" id="detail-client-total">0 CFA</p>
                </div>
                <div class="bg-purple-50 p-4 rounded-xl border border-purple-100">
                    <p class="text-xs text-purple-600 uppercase font-bold mb-1">Nombre d'Achats</p>
                    <p class="text-2xl font-bold text-purple-900" id="detail-client-count">0</p>
                </div>
            </div>

            <h4 class="font-bold text-sm text-gray-900 mb-3 uppercase tracking-wider">Historique d'Achats</h4>
            <div class="max-h-60 overflow-y-auto border border-gray-100 rounded-xl bg-gray-50">
                <div id="detail-client-history" class="divide-y divide-gray-100">
                    <!-- History items -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Variant Selection -->
    <div id="variant-modal"
        class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm hidden">
        <div class="bg-white p-6 rounded-2xl w-full max-w-md shadow-2xl transition-all transform scale-100">
            <div class="flex justify-between items-start mb-4">
                <div>
                    <h3 class="font-bold text-lg text-gray-900" id="variant-modal-title">Choisir une variante</h3>
                    <p class="text-xs text-gray-500" id="variant-modal-subtitle">S√©lectionnez la taille et la couleur
                    </p>
                </div>
                <button onclick="document.getElementById('variant-modal').classList.add('hidden')"
                    class="text-gray-400 hover:text-gray-600">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>

            <div id="variant-options-container" class="grid grid-cols-1 gap-3 max-h-[60vh] overflow-y-auto mb-4">
                <!-- Populated by JS -->
            </div>

            <button onclick="document.getElementById('variant-modal').classList.add('hidden')"
                class="w-full py-3 bg-gray-100 text-gray-700 font-medium rounded-xl hover:bg-gray-200">Annuler</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="scripts/storage.js"></script>
    <script src="scripts/auth.js"></script>
    <script src="scripts/vendeuse.js"></script>
    <script>
        // Init
        document.addEventListener('DOMContentLoaded', () => {
            // ... existing init code ...
            if (window.VendeuseApp) VendeuseApp.init();
        });
    </script>
</body>

</html>